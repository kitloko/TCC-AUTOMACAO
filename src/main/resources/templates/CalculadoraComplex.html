<!DOCTYPE HTML>
<html xmlns:th="https://www.thymeleaf.org">
<head>
    <title>Getting Started: Handling Form Submission</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>

    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.7/dist/umd/popper.min.js"></script>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN"
            crossorigin="anonymous"></script>

    <script
            src="https://code.jquery.com/jquery-3.6.4.js"
            integrity="sha256-a9jBBRygX1Bh5lt8GZjXDzyOB+bWve9EiO7tROUtj/E="
            crossorigin="anonymous"></script>


    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.3/font/bootstrap-icons.css">

</head>
<body class="bg-light">
<div class="container">

    <form action="#" method="post" id="frm_details" name="frm_details">
        <div class="row g-4 mb-5 mt-3 bg-white border">
            <h1 class="text-primary">Processo</h1>
            <!--        <div class="col">-->
            <!--            <div class="card h-100">-->
            <!--                <div class="card-body">-->
            <!--                    <h6 class="card-title">Custo Total de Colaboradores</h6>-->
            <!--                    <h1 class="card-text" th:text="'Anual R$ ' + ${greeting.totalColabAno}">R$ 0,00</h1>-->
            <!--                    <p class="card-text" th:text="'Mensal R$ ' + ${greeting.totalColab}">R$ 0,00</p>-->
            <!--                </div>-->
            <!--            </div>-->
            <!--        </div>-->
            <div class="col">
                <div class="card h-100">
                    <div class="card-body">
                        <h5 class="card-title">Tempo p/ Realizar o Processo</h5>
                        <label for="tempoProcesso" class="form-label">Quantidade Colaboradores</label>
                        <input type="time" class="form-control" id="tempoProcesso" name="tempoProcesso" aria-describedby="tempoProcesso"
                               value="0">
                        <h1 class="card-text" id="tempoProcessoInput">00:00</h1>
                    </div>
                </div>
            </div>

            <div class="col">
                <div class="card h-100">
                    <div class="card-body">
                        <h5 class="card-title">Custo do Processo</h5>
                        <label for="custoProcesso" class="form-label">Quantidade Colaboradores</label>
                        <input type="number" class="form-control" id="custoProcesso" name="custoProcesso" aria-describedby="custoProcesso"
                               value="0">
                        <h1 class="card-text" id="custoProcessoInput">R$ 0,00</h1>
                    </div>
                </div>
            </div>

            <div class="col">
                <div class="card h-100">
                    <div class="card-body">
                        <h5 class="card-title">Salários do Processo</h5>
                        <label for="salariosProcesso" class="form-label">Quantidade Colaboradores</label>
                        <input type="number" class="form-control" id="salariosProcesso" name="salariosProcesso"
                               aria-describedby="salariosProcesso" value="0">
                        <h1 class="card-text" id="salariosProcessoInput">R$ 0,00</h1>
                    </div>
                </div>
            </div>

            <div class="col">
                <div class="card h-100">
                    <div class="card-body">
                        <h5 class="card-title">Despesas Operacionais</h5>
                        <label for="despesasProcesso" class="form-label">Quantidade Colaboradores</label>
                        <input type="number" class="form-control" id="despesasProcesso" name="despesasProcesso"
                               aria-describedby="despesasProcesso" value="0">
                        <h1 class="card-text" id="despesasProcessoInput">R$ 0,00</h1>
                    </div>
                </div>

            </div>
            <p class="lead">
                <button type="submit" class="btn btn-lg btn-danger fw-bold">Enviar</button>
            </p>
        </div>
    </form>

    <script>
        $(document).ready(function() {
            $("#frm_details").on("submit", function(event) {
                event.preventDefault();

                // Obtém os dados do formulário em formato JSON
                var formData = {};
                formData["tempoProcesso"] = $("#tempoProcesso").val();
                formData["custoProcesso"] = $("#custoProcesso").val();
                formData["salariosProcesso"] = $("#salariosProcesso").val();
                formData["despesasProcesso"] = $("#despesasProcesso").val();
                console.log(formData);

                // Envia o formulário com o formato JSON para o servidor
                $.ajax({
                    url: 'http://localhost:8080/processo/form',
                    type: 'POST',
                    contentType: 'application/json',
                    data: JSON.stringify(formData),
                    success: function(data) {
                        console.log('Dados recebidos do servidor:', data);
                        console.log(data.tempoProcesso);
                        console.log(data.custoProcesso);
                        console.log(data.despesasProcesso);
                        console.log(data.salariosProcesso);
                        $("#tempoProcessoInput").text(data.tempoProcesso);
                        $("#custoProcessoInput").text("R$: "+data.custoProcesso);
                        $("#despesasProcessoInput").text("R$: "+data.despesasProcesso);
                        $("#salariosProcessoInput").text("R$: "+data.salariosProcesso);
                    },
                    error: function (e) {
                        console.log("ERROR : ", e);
                    }
                });
            });
        })
    </script>
</div>


</body>
</html>